<!-- home.html -->
{% extends "base.html" %}

{% block title %}AI Music Recommendation Turntable{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sofia">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Special+Gothic+Expanded+One&display=swap">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
    <script src="https://unpkg.com/vue@3.3.4/dist/vue.global.js"></script>
{% endblock %}

{% block content %}
    <!-- Hero section with lava lamp background -->
    <div class="hero-section">
        <!-- Lava lamp background -->
        <div id="lavaLamp" class="lava-lamp-container">
            <div class="metaballs">
                <svg class="metasvg">
                    <defs>
                        <!-- Enhanced gooey filter with more blur and higher contrast -->
                        <filter id="gooify" width="400%" x="-100%" height="400%" y="-100%">
                            <feGaussianBlur in="SourceGraphic" stdDeviation="30" result="blur" />
                            <feColorMatrix 
                                in="blur" 
                                mode="matrix" 
                                values="1 0 0 0 0
                                    0 1 0 0 0
                                    0 0 1 0 0
                                    0 0 0 40 -10"
                                result="gooey" 
                            />
                        </filter>
                        
                        <!-- Improved glow effect -->
                        <filter id="glowing">
                            <feGaussianBlur stdDeviation="8" result="blur" />
                            <feComposite in="SourceGraphic" in2="blur" operator="over" />
                        </filter>
                        
                        <!-- Richer gradient for more realistic lava appearance -->
                        <linearGradient id="lavaGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" stop-color="#ffd000" />
                            <stop offset="30%" stop-color="#ffac00" />
                            <stop offset="60%" stop-color="#ff7300" />
                            <stop offset="100%" stop-color="#ff3d00" />
                        </linearGradient>
                    </defs>
                    
                    <g filter="url(#gooify)">
                        <!-- Lava lamp blobs -->
                        <circle class="blobb" id="blob1" r="180" />
                        <circle class="blobb" id="blob2" r="140" />
                        <circle class="blobb" id="blob3" r="160" />
                        <circle class="blobb" id="blob4" r="120" />
                        <circle class="blobb" id="blob5" r="130" />
                        <circle class="blobb" id="blob6" r="90" />
                        <circle class="blobb" id="blob7" r="110" />
                        <circle class="blobb" id="blob8" r="100" />
                        <circle class="blobb" id="blob9" r="85" />
                        <circle class="blobb" id="blob10" r="75" />
                    </g>
                </svg>
            </div>
        </div>

        <div class="container">
            <div class="header">
                <h1>T u r n t a b l e</h1>
                <p><em>Listen Different. Explore new music.</em></p>
            </div>
            
            <div class="turntable-deck">
                <div class="turntable-top-row">
                    <!-- Record player -->
                    <div class="record-player">
                        <div class="record-base"></div>
                        <div class="record" id="record">
                            <div class="record-grooves"></div>
                            <div class="album-cover" id="albumCover">
                                <div class="album-cover-placeholder">Album art will appear here</div>
                            </div>
                        </div>
                        <div class="record-arm" id="recordArm"></div>
                    </div>

                    <div class="controls-section">
                        <div class="control-panel">
                            <div class="knob-container">
                                <div class="knob-label">Time Frame</div>
                                <div class="knob" id="timeframeKnob" data-value="0"></div>
                                <div class="knob-value" id="timeframeValue">Any</div>
                            </div>
                            
                            <div class="knob-container">
                                <div class="knob-label">Genre</div>
                                <div class="knob" id="genreKnob" data-value="0"></div>
                                <div class="knob-value" id="genreValue">Any</div>
                            </div>
                        </div>

                        <div class="slider-horizontal-container">
                            <div class="slider-label">Recommendations</div>
                            <!-- Tick marks -->
                            <div class="slider-ticks">
                                <div class="slider-tick"></div>
                                <div class="slider-tick"></div>
                                <div class="slider-tick"></div>
                                <div class="slider-tick"></div>
                                <div class="slider-tick"></div>
                                <div class="slider-tick"></div>
                                <div class="slider-tick"></div>
                                <div class="slider-tick"></div>
                                <div class="slider-tick"></div>
                                <div class="slider-tick"></div>
                            </div>
                            <input type="range" min="1" max="10" value="5" class="recommendation-slider-horizontal" id="recommendationSlider">
                            <div class="slider-value" id="sliderValue">5</div>
                        </div>
                    </div>
                </div>

                <!-- Search bar -->
                <div class="search-container">
                    <button type="button" class="randomize-button">Randomize</button>
                    <input type="text" id="songSearch" class="search-input" placeholder="Search for a song or artist..." />
                    <div id="searchResults" class="search-results"></div>
                </div>
            </div>
            
            <!-- Recommendation results - KEPT INSIDE HERO SECTION BUT OUTSIDE CONTAINER -->
            <div class="recommendationBox"></div>
        </div>
    </div>

    <!-- Content sections without lava lamp background -->
    <div class="content-sections">
        <section class="section">
            <h2>Pick of the Week</h2>
            <p>TO DO</p>
        </section>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/home.js') }}"></script>
{% endblock %}